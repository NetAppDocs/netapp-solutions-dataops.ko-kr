= 
:allow-uri-read: 


[role="tabbed-block"]
====
.ANF
--
.Azure에 ANF 볼륨을 배포하기 위한 Terraform 구성 파일
이 섹션에는 Azure에서 ANF(Azure Netapp Files) 볼륨을 배포/구성하기 위한 다양한 Terraform 구성 파일이 포함되어 있습니다.

Terraform 문서: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs[]

.절차
템플릿을 실행하려면:

. 저장소를 복제합니다.
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 원하는 폴더로 이동하세요
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Azure CLI에 로그인합니다(Azure CLI가 설치되어 있어야 합니다).
+
[source, cli]
----
    az login
----
. 변수 값을 업데이트합니다. `vars/azure_anf.tfvars` .
+

NOTE: "vnet_creation_bool" 변수와 "subnet_creation_bool" 값을 false로 설정하고 "subnet_id_for_anf_vol"을 제공하여 기존 vnet과 서브넷을 사용하여 ANF 볼륨을 배포하도록 선택할 수 있습니다.  해당 값을 true로 설정하고 새로운 vnet과 서브넷을 만들 수도 있습니다. 이 경우 서브넷 ID는 새로 만든 서브넷에서 자동으로 가져옵니다.

. Terraform 저장소를 초기화하여 모든 필수 구성 요소를 설치하고 배포를 준비합니다.
+
[source, cli]
----
    terraform init
----
. terraform validate 명령을 사용하여 Terraform 파일을 확인합니다.
+
[source, cli]
----
    terraform validate
----
. 배포에 필요한 모든 변경 사항을 미리 보려면 구성을 시험적으로 실행해 보세요.
+
[source, cli]
----
    terraform plan -target="module.anf" -var-file="vars/azure_anf.tfvars"
----
. 배포 실행
+
[source, cli]
----
    terraform apply -target="module.anf" -var-file="vars/azure_anf.tfvars"
----


배포를 삭제하려면

[source, cli]
----
  terraform destroy
----
.요리법:
`Single Node Instance`

단일 NetApp ANF 볼륨에 대한 Terraform 변수입니다.

[cols="20%, 10%, 70%"]
|===
| *이름* | *유형* | *설명* 


| *az_위치* | 끈 | (필수) 리소스가 있는 지원되는 Azure 위치를 지정합니다.  이것을 변경하면 새로운 리소스가 생성되어야 합니다. 


| *az_prefix* | 끈 | (필수) NetApp 볼륨을 생성해야 하는 리소스 그룹의 이름입니다.  이것을 변경하면 새로운 리소스가 생성되어야 합니다. 


| *az_vnet_주소_공간* | 끈 | (필수) ANF 볼륨 배포를 위해 새로 생성된 vnet에서 사용할 주소 공간입니다. 


| *az_서브넷_주소_접두사* | 끈 | (필수) ANF 볼륨 배포를 위해 새로 생성된 vnet에서 사용할 서브넷 주소 접두사입니다. 


| *az_볼륨_경로* | 끈 | (필수) 볼륨에 대한 고유한 파일 경로입니다.  마운트 타겟을 생성할 때 사용됩니다.  이것을 변경하면 새로운 리소스가 생성되어야 합니다. 


| *az_수용량_풀_크기* | 정수 | (필수) TB에 언급된 용량 풀 크기. 


| *az_vnet_creation_bool* | 부울 | (필수) 이 부울을 다음으로 설정합니다. `true` 새로운 vnet을 생성하려는 경우.  그것을 설정하세요 `false` 기존 vnet을 사용합니다. 


| *az_subnet_creation_bool* | 부울 | (필수) 이 부울을 다음으로 설정합니다. `true` 새로운 서브넷을 생성합니다.  그것을 설정하세요 `false` 기존 서브넷을 사용합니다. 


| *az_subnet_id_for_anf_vol* | 끈 | (필수) 기존 서브넷을 사용하기로 결정한 경우 서브넷 ID를 언급하십시오. `subnet_creation_bool` 사실입니다.  false로 설정하면 기본값을 그대로 둡니다. 


| *az_netapp_pool_service_level* | 끈 | (필수) 파일 시스템의 목표 성능.  유효한 값은 다음과 같습니다. `Premium` , `Standard` , 또는 `Ultra` . 


| *az_netapp_vol_service_level* | 끈 | (필수) 파일 시스템의 목표 성능.  유효한 값은 다음과 같습니다. `Premium` , `Standard` , 또는 `Ultra` . 


| *az_netapp_vol_프로토콜* | 끈 | (선택 사항) 목록으로 표현된 대상 볼륨 프로토콜입니다.  지원되는 단일 값에는 다음이 포함됩니다. `CIFS` , `NFSv3` , 또는 `NFSv4.1` .  인수가 정의되지 않으면 기본값으로 사용됩니다. `NFSv3` .  이것을 변경하면 새로운 리소스가 생성되고 데이터가 손실됩니다. 


| *az_netapp_vol_security_style* | 끈 | (선택 사항) 볼륨 보안 스타일, 허용되는 값은 다음과 같습니다. `Unix` 또는 `Ntfs` .  제공되지 않으면 기본적으로 단일 프로토콜 볼륨이 생성됩니다. `Unix` 만약 그것이라면 `NFSv3` 또는 `NFSv4.1` 볼륨, 만약 `CIFS` , 기본값으로 설정됩니다 `Ntfs` .  듀얼 프로토콜 볼륨에서 제공되지 않으면 해당 값은 다음과 같습니다. `Ntfs` . 


| *az_netapp_vol_storage_quota* | 끈 | (필수) 파일 시스템에 허용되는 최대 저장 할당량(기가바이트)입니다. 
|===

NOTE: 권장 사항에 따라 이 스크립트는 다음을 사용합니다. `prevent_destroy` 구성 파일에서 실수로 데이터가 손실될 가능성을 완화하기 위해 수명 주기 인수를 사용합니다.  자세한 내용은 `prevent_destroy` 수명 주기 인수에 대해서는 Terraform 문서를 참조하세요. https://developer.hashicorp.com/terraform/tutorials/state/resource-lifecycle#prevent-resource-deletion[] .

--
.ANF 데이터 보호
--
.Azure에서 데이터 보호 기능이 있는 ANF 볼륨을 배포하기 위한 Terraform 구성 파일
이 섹션에는 Azure에서 데이터 보호 기능을 갖춘 ANF(Azure Netapp Files) 볼륨을 배포/구성하기 위한 다양한 Terraform 구성 파일이 포함되어 있습니다.

Terraform 문서: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs[]

.절차
템플릿을 실행하려면:

. 저장소를 복제합니다.
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 원하는 폴더로 이동하세요
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Azure CLI에 로그인합니다(Azure CLI가 설치되어 있어야 합니다).
+
[source, cli]
----
    az login
----
. 변수 값을 업데이트합니다. `vars/azure_anf_data_protection.tfvars` .
+

NOTE: "vnet_creation_bool" 변수와 "subnet_creation_bool" 값을 false로 설정하고 "subnet_id_for_anf_vol"을 제공하여 기존 vnet과 서브넷을 사용하여 ANF 볼륨을 배포하도록 선택할 수 있습니다.  해당 값을 true로 설정하고 새로운 vnet과 서브넷을 만들 수도 있습니다. 이 경우 서브넷 ID는 새로 만든 서브넷에서 자동으로 가져옵니다.

. Terraform 저장소를 초기화하여 모든 필수 구성 요소를 설치하고 배포를 준비합니다.
+
[source, cli]
----
    terraform init
----
. terraform validate 명령을 사용하여 Terraform 파일을 확인합니다.
+
[source, cli]
----
    terraform validate
----
. 배포에 필요한 모든 변경 사항을 미리 보려면 구성을 시험적으로 실행해 보세요.
+
[source, cli]
----
    terraform plan -target="module.anf_data_protection" -var-file="vars/azure_anf_data_protection.tfvars"
----
. 배포 실행
+
[source, cli]
----
    terraform apply -target="module.anf_data_protection" -var-file="vars/azure_anf_data_protection.tfvars
----


배포를 삭제하려면

[source, cli]
----
  terraform destroy
----
.요리법:
`ANF Data Protection`

데이터 보호가 활성화된 단일 ANF 볼륨에 대한 Terraform 변수입니다.

[cols="20%, 10%, 70%"]
|===
| *이름* | *유형* | *설명* 


| *az_위치* | 끈 | (필수) 리소스가 있는 지원되는 Azure 위치를 지정합니다.  이것을 변경하면 새로운 리소스가 생성되어야 합니다. 


| *az_alt_location* | 끈 | (필수) 보조 볼륨이 생성될 Azure 위치 


| *az_prefix* | 끈 | (필수) NetApp 볼륨을 생성해야 하는 리소스 그룹의 이름입니다.  이것을 변경하면 새로운 리소스가 생성되어야 합니다. 


| *az_vnet_primary_address_space* | 끈 | (필수) ANF 기본 볼륨 배포를 위해 새로 생성된 vnet에서 사용할 주소 공간입니다. 


| *az_vnet_보조_주소_공간* | 끈 | (필수) ANF 보조 볼륨 배포를 위해 새로 생성된 vnet에서 사용할 주소 공간입니다. 


| *az_subnet_primary_address_prefix* | 끈 | (필수) ANF 기본 볼륨 배포를 위해 새로 생성된 vnet에서 사용할 서브넷 주소 접두사입니다. 


| *az_subnet_secondary_address_prefix* | 끈 | (필수) ANF 보조 볼륨 배포를 위해 새로 생성된 vnet에서 사용할 서브넷 주소 접두사입니다. 


| *az_볼륨_경로_기본* | 끈 | (필수) 기본 볼륨에 대한 고유한 파일 경로입니다.  마운트 타겟을 생성할 때 사용됩니다.  이것을 변경하면 새로운 리소스가 생성되어야 합니다. 


| *az_볼륨_경로_보조* | 끈 | (필수) 보조 볼륨에 대한 고유한 파일 경로입니다.  마운트 타겟을 생성할 때 사용됩니다.  이것을 변경하면 새로운 리소스가 생성되어야 합니다. 


| *az_용량_풀_크기_기본* | 정수 | (필수) TB에 언급된 용량 풀 크기. 


| *az_용량_풀_크기_보조* | 정수 | (필수) TB에 언급된 용량 풀 크기. 


| *az_vnet_primary_creation_bool* | 부울 | (필수) 이 부울을 다음으로 설정합니다. `true` 기본 볼륨에 대한 새로운 VNet을 생성하려는 경우.  그것을 설정하세요 `false` 기존 vnet을 사용합니다. 


| *az_vnet_secondary_creation_bool* | 부울 | (필수) 이 부울을 다음으로 설정합니다. `true` 보조 볼륨에 대한 새로운 VNet을 생성하려는 경우.  그것을 설정하세요 `false` 기존 vnet을 사용합니다. 


| *az_subnet_primary_creation_bool* | 부울 | (필수) 이 부울을 다음으로 설정합니다. `true` 기본 볼륨에 대한 새로운 서브넷을 생성합니다.  그것을 설정하세요 `false` 기존 서브넷을 사용합니다. 


| *az_subnet_secondary_creation_bool* | 부울 | (필수) 이 부울을 다음으로 설정합니다. `true` 보조 볼륨에 대한 새로운 서브넷을 생성합니다.  그것을 설정하세요 `false` 기존 서브넷을 사용합니다. 


| *az_primary_subnet_id_for_anf_vol* | 끈 | (필수) 기존 서브넷을 사용하기로 결정한 경우 서브넷 ID를 언급하십시오. `subnet_primary_creation_bool` 사실입니다.  false로 설정한 경우 기본값을 그대로 둡니다. 


| *az_secondary_subnet_id_for_anf_vol* | 끈 | (필수) 기존 서브넷을 사용하기로 결정한 경우 서브넷 ID를 언급하십시오. `subnet_secondary_creation_bool` 사실입니다.  false로 설정한 경우 기본값을 그대로 둡니다. 


| *az_netapp_pool_service_level_primary* | 끈 | (필수) 파일 시스템의 목표 성능.  유효한 값은 다음과 같습니다. `Premium` , `Standard` , 또는 `Ultra` . 


| *az_netapp_pool_service_level_secondary* | 끈 | (필수) 파일 시스템의 목표 성능.  유효한 값은 다음과 같습니다. `Premium` , `Standard` , 또는 `Ultra` . 


| *az_netapp_vol_service_level_primary* | 끈 | (필수) 파일 시스템의 목표 성능.  유효한 값은 다음과 같습니다. `Premium` , `Standard` , 또는 `Ultra` . 


| *az_netapp_vol_service_level_secondary* | 끈 | (필수) 파일 시스템의 목표 성능.  유효한 값은 다음과 같습니다. `Premium` , `Standard` , 또는 `Ultra` . 


| *az_netapp_vol_protocol_primary* | 끈 | (선택 사항) 목록으로 표현된 대상 볼륨 프로토콜입니다.  지원되는 단일 값에는 다음이 포함됩니다. `CIFS` , `NFSv3` , 또는 `NFSv4.1` .  인수가 정의되지 않으면 기본값으로 사용됩니다. `NFSv3` .  이것을 변경하면 새로운 리소스가 생성되고 데이터가 손실됩니다. 


| *az_netapp_vol_protocol_secondary* | 끈 | (선택 사항) 목록으로 표현된 대상 볼륨 프로토콜입니다.  지원되는 단일 값에는 다음이 포함됩니다. `CIFS` , `NFSv3` , 또는 `NFSv4.1` .  인수가 정의되지 않으면 기본값으로 사용됩니다. `NFSv3` .  이것을 변경하면 새로운 리소스가 생성되고 데이터가 손실됩니다. 


| *az_netapp_vol_storage_quota_primary* | 끈 | (필수) 파일 시스템에 허용되는 최대 저장 할당량(기가바이트)입니다. 


| *az_netapp_vol_storage_quota_secondary* | 끈 | (필수) 파일 시스템에 허용되는 최대 저장 할당량(기가바이트)입니다. 


| *az_dp_복제_빈도* | 끈 | (필수) 복제 빈도, 지원되는 값은 다음과 같습니다. `10minutes` , `hourly` , `daily` , 값은 대소문자를 구분합니다. 
|===

NOTE: 권장 사항에 따라 이 스크립트는 다음을 사용합니다. `prevent_destroy` 구성 파일에서 실수로 데이터가 손실될 가능성을 완화하기 위해 수명 주기 인수를 사용합니다.  자세한 내용은 `prevent_destroy` 수명 주기 인수에 대해서는 Terraform 문서를 참조하세요. https://developer.hashicorp.com/terraform/tutorials/state/resource-lifecycle#prevent-resource-deletion[] .

--
.ANF 이중 프로토콜
--
.Azure에서 이중 프로토콜을 사용하여 ANF 볼륨을 배포하기 위한 Terraform 구성 파일
이 섹션에는 Azure에서 이중 프로토콜을 활성화하여 ANF(Azure Netapp Files) 볼륨을 배포/구성하기 위한 다양한 Terraform 구성 파일이 포함되어 있습니다.

Terraform 문서: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs[]

.절차
템플릿을 실행하려면:

. 저장소를 복제합니다.
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 원하는 폴더로 이동하세요
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Azure CLI에 로그인합니다(Azure CLI가 설치되어 있어야 합니다).
+
[source, cli]
----
    az login
----
. 변수 값을 업데이트합니다. `vars/azure_anf_dual_protocol.tfvars` .
+

NOTE: "vnet_creation_bool" 변수와 "subnet_creation_bool" 값을 false로 설정하고 "subnet_id_for_anf_vol"을 제공하여 기존 vnet과 서브넷을 사용하여 ANF 볼륨을 배포하도록 선택할 수 있습니다.  해당 값을 true로 설정하고 새로운 vnet과 서브넷을 만들 수도 있습니다. 이 경우 서브넷 ID는 새로 만든 서브넷에서 자동으로 가져옵니다.

. Terraform 저장소를 초기화하여 모든 필수 구성 요소를 설치하고 배포를 준비합니다.
+
[source, cli]
----
    terraform init
----
. terraform validate 명령을 사용하여 Terraform 파일을 확인합니다.
+
[source, cli]
----
    terraform validate
----
. 배포에 필요한 모든 변경 사항을 미리 보려면 구성을 시험적으로 실행해 보세요.
+
[source, cli]
----
    terraform plan -target="module.anf_dual_protocol" -var-file="vars/azure_anf_dual_protocol.tfvars"
----
. 배포 실행
+
[source, cli]
----
    terraform apply -target="module.anf_dual_protocol" -var-file="vars/azure_anf_dual_protocol.tfvars"
----


배포를 삭제하려면

[source, cli]
----
  terraform destroy
----
.요리법:
`Single Node Instance`

듀얼 프로토콜이 활성화된 단일 ANF 볼륨에 대한 Terraform 변수입니다.

[cols="20%, 10%, 70%"]
|===
| *이름* | *유형* | *설명* 


| *az_위치* | 끈 | (필수) 리소스가 있는 지원되는 Azure 위치를 지정합니다.  이것을 변경하면 새로운 리소스가 생성되어야 합니다. 


| *az_prefix* | 끈 | (필수) NetApp 볼륨을 생성해야 하는 리소스 그룹의 이름입니다.  이것을 변경하면 새로운 리소스가 생성되어야 합니다. 


| *az_vnet_주소_공간* | 끈 | (필수) ANF 볼륨 배포를 위해 새로 생성된 vnet에서 사용할 주소 공간입니다. 


| *az_서브넷_주소_접두사* | 끈 | (필수) ANF 볼륨 배포를 위해 새로 생성된 vnet에서 사용할 서브넷 주소 접두사입니다. 


| *az_볼륨_경로* | 끈 | (필수) 볼륨에 대한 고유한 파일 경로입니다.  마운트 타겟을 생성할 때 사용됩니다.  이것을 변경하면 새로운 리소스가 생성되어야 합니다. 


| *az_수용량_풀_크기* | 정수 | (필수) TB에 언급된 용량 풀 크기. 


| *az_vnet_creation_bool* | 부울 | (필수) 이 부울을 다음으로 설정합니다. `true` 새로운 vnet을 생성하려는 경우.  그것을 설정하세요 `false` 기존 vnet을 사용합니다. 


| *az_subnet_creation_bool* | 부울 | (필수) 이 부울을 다음으로 설정합니다. `true` 새로운 서브넷을 생성합니다.  그것을 설정하세요 `false` 기존 서브넷을 사용합니다. 


| *az_subnet_id_for_anf_vol* | 끈 | (필수) 기존 서브넷을 사용하기로 결정한 경우 서브넷 ID를 언급하십시오. `subnet_creation_bool` 사실입니다.  false로 설정하면 기본값을 그대로 둡니다. 


| *az_netapp_pool_service_level* | 끈 | (필수) 파일 시스템의 목표 성능.  유효한 값은 다음과 같습니다. `Premium` , `Standard` , 또는 `Ultra` . 


| *az_netapp_vol_service_level* | 끈 | (필수) 파일 시스템의 목표 성능.  유효한 값은 다음과 같습니다. `Premium` , `Standard` , 또는 `Ultra` . 


| *az_netapp_vol_protocol1* | 끈 | (필수) 목록으로 표현된 대상 볼륨 프로토콜입니다.  지원되는 단일 값에는 다음이 포함됩니다. `CIFS` , `NFSv3` , 또는 `NFSv4.1` .  인수가 정의되지 않으면 기본값으로 사용됩니다. `NFSv3` .  이것을 변경하면 새로운 리소스가 생성되고 데이터가 손실됩니다. 


| *az_netapp_vol_protocol2* | 끈 | (필수) 목록으로 표현된 대상 볼륨 프로토콜입니다.  지원되는 단일 값에는 다음이 포함됩니다. `CIFS` , `NFSv3` , 또는 `NFSv4.1` .  인수가 정의되지 않으면 기본값으로 사용됩니다. `NFSv3` .  이것을 변경하면 새로운 리소스가 생성되고 데이터가 손실됩니다. 


| *az_netapp_vol_storage_quota* | 끈 | (필수) 파일 시스템에 허용되는 최대 저장 할당량(기가바이트)입니다. 


| *az_smb_server_username* | 끈 | (필수) ActiveDirectory 개체를 생성하기 위한 사용자 이름입니다. 


| *az_smb_서버_비밀번호* | 끈 | (필수) ActiveDirectory 개체를 생성하기 위한 사용자 비밀번호입니다. 


| *az_smb_서버_이름* | 끈 | (필수) ActiveDirectory 개체를 생성할 서버 이름입니다. 


| *az_smb_dns_서버* | 끈 | (필수) ActiveDirectory 객체를 생성하기 위한 DNS 서버 IP입니다. 
|===

NOTE: 권장 사항에 따라 이 스크립트는 다음을 사용합니다. `prevent_destroy` 구성 파일에서 실수로 데이터가 손실될 가능성을 완화하기 위해 수명 주기 인수를 사용합니다.  자세한 내용은 `prevent_destroy` 수명 주기 인수에 대해서는 Terraform 문서를 참조하세요. https://developer.hashicorp.com/terraform/tutorials/state/resource-lifecycle#prevent-resource-deletion[] .

--
.스냅샷에서 본 ANF 볼륨
--
.Azure의 스냅샷에서 ANF 볼륨을 배포하기 위한 Terraform 구성 파일
이 섹션에는 Azure의 스냅샷에서 ANF(Azure Netapp Files) 볼륨을 배포/구성하기 위한 다양한 Terraform 구성 파일이 포함되어 있습니다.

Terraform 문서: https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs[]

.절차
템플릿을 실행하려면:

. 저장소를 복제합니다.
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 원하는 폴더로 이동하세요
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Azure CLI에 로그인합니다(Azure CLI가 설치되어 있어야 합니다).
+
[source, cli]
----
    az login
----
. 변수 값을 업데이트합니다. `vars/azure_anf_volume_from_snapshot.tfvars` .



NOTE: "vnet_creation_bool" 변수와 "subnet_creation_bool" 값을 false로 설정하고 "subnet_id_for_anf_vol"을 제공하여 기존 vnet과 서브넷을 사용하여 ANF 볼륨을 배포하도록 선택할 수 있습니다.  해당 값을 true로 설정하고 새로운 vnet과 서브넷을 만들 수도 있습니다. 이 경우 서브넷 ID는 새로 만든 서브넷에서 자동으로 가져옵니다.

. Terraform 저장소를 초기화하여 모든 필수 구성 요소를 설치하고 배포를 준비합니다.
+
[source, cli]
----
    terraform init
----
. terraform validate 명령을 사용하여 Terraform 파일을 확인합니다.
+
[source, cli]
----
    terraform validate
----
. 배포에 필요한 모든 변경 사항을 미리 보려면 구성을 시험적으로 실행해 보세요.
+
[source, cli]
----
    terraform plan -target="module.anf_volume_from_snapshot" -var-file="vars/azure_anf_volume_from_snapshot.tfvars"
----
. 배포 실행
+
[source, cli]
----
    terraform apply -target="module.anf_volume_from_snapshot" -var-file="vars/azure_anf_volume_from_snapshot.tfvars"
----


배포를 삭제하려면

[source, cli]
----
  terraform destroy
----
.요리법:
`Single Node Instance`

스냅샷을 사용한 단일 ANF 볼륨에 대한 Terraform 변수.

[cols="20%, 10%, 70%"]
|===
| *이름* | *유형* | *설명* 


| *az_위치* | 끈 | (필수) 리소스가 있는 지원되는 Azure 위치를 지정합니다.  이것을 변경하면 새로운 리소스가 생성되어야 합니다. 


| *az_prefix* | 끈 | (필수) NetApp 볼륨을 생성해야 하는 리소스 그룹의 이름입니다.  이것을 변경하면 새로운 리소스가 생성되어야 합니다. 


| *az_vnet_주소_공간* | 끈 | (필수) ANF 볼륨 배포를 위해 새로 생성된 vnet에서 사용할 주소 공간입니다. 


| *az_서브넷_주소_접두사* | 끈 | (필수) ANF 볼륨 배포를 위해 새로 생성된 vnet에서 사용할 서브넷 주소 접두사입니다. 


| *az_볼륨_경로* | 끈 | (필수) 볼륨에 대한 고유한 파일 경로입니다.  마운트 타겟을 생성할 때 사용됩니다.  이것을 변경하면 새로운 리소스가 생성되어야 합니다. 


| *az_수용량_풀_크기* | 정수 | (필수) TB에 언급된 용량 풀 크기. 


| *az_vnet_creation_bool* | 부울 | (필수) 이 부울을 다음으로 설정합니다. `true` 새로운 vnet을 생성하려는 경우.  그것을 설정하세요 `false` 기존 vnet을 사용합니다. 


| *az_subnet_creation_bool* | 부울 | (필수) 이 부울을 다음으로 설정합니다. `true` 새로운 서브넷을 생성합니다.  그것을 설정하세요 `false` 기존 서브넷을 사용합니다. 


| *az_subnet_id_for_anf_vol* | 끈 | (필수) 기존 서브넷을 사용하기로 결정한 경우 서브넷 ID를 언급하십시오. `subnet_creation_bool` 사실입니다.  false로 설정하면 기본값을 그대로 둡니다. 


| *az_netapp_pool_service_level* | 끈 | (필수) 파일 시스템의 목표 성능.  유효한 값은 다음과 같습니다. `Premium` , `Standard` , 또는 `Ultra` . 


| *az_netapp_vol_service_level* | 끈 | (필수) 파일 시스템의 목표 성능.  유효한 값은 다음과 같습니다. `Premium` , `Standard` , 또는 `Ultra` . 


| *az_netapp_vol_프로토콜* | 끈 | (선택 사항) 목록으로 표현된 대상 볼륨 프로토콜입니다.  지원되는 단일 값에는 다음이 포함됩니다. `CIFS` , `NFSv3` , 또는 `NFSv4.1` .  인수가 정의되지 않으면 기본값으로 사용됩니다. `NFSv3` .  이것을 변경하면 새로운 리소스가 생성되고 데이터가 손실됩니다. 


| *az_netapp_vol_storage_quota* | 끈 | (필수) 파일 시스템에 허용되는 최대 저장 할당량(기가바이트)입니다. 


| *az_스냅샷_아이디* | 끈 | (필수) 새로운 ANF 볼륨을 생성할 스냅샷 ID입니다. 
|===

NOTE: 권장 사항에 따라 이 스크립트는 다음을 사용합니다. `prevent_destroy` 구성 파일에서 실수로 데이터가 손실될 가능성을 완화하기 위해 수명 주기 인수를 사용합니다.  자세한 내용은 `prevent_destroy` 수명 주기 인수에 대해서는 Terraform 문서를 참조하세요. https://developer.hashicorp.com/terraform/tutorials/state/resource-lifecycle#prevent-resource-deletion[] .

--
.CVO 단일 노드 배포
--
.Azure에 단일 노드 CVO 배포를 위한 Terraform 구성 파일
이 섹션에는 Azure에서 Single Node CVO(Cloud Volumes ONTAP)를 배포/구성하기 위한 다양한 Terraform 구성 파일이 포함되어 있습니다.

Terraform 문서: https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs[]

.절차
템플릿을 실행하려면:

. 저장소를 복제합니다.
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 원하는 폴더로 이동하세요
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Azure CLI에 로그인합니다(Azure CLI가 설치되어 있어야 합니다).
+
[source, cli]
----
    az login
----
. 변수를 업데이트하세요 `vars\azure_cvo_single_node_deployment.tfvars` .
. Terraform 저장소를 초기화하여 모든 필수 구성 요소를 설치하고 배포를 준비합니다.
+
[source, cli]
----
    terraform init
----
. terraform validate 명령을 사용하여 Terraform 파일을 확인합니다.
+
[source, cli]
----
    terraform validate
----
. 배포에 필요한 모든 변경 사항을 미리 보려면 구성을 시험적으로 실행해 보세요.
+
[source, cli]
----
    terraform plan -target="module.az_cvo_single_node_deployment" -var-file="vars\azure_cvo_single_node_deployment.tfvars"
----
. 배포 실행
+
[source, cli]
----
    terraform apply -target="module.az_cvo_single_node_deployment" -var-file="vars\azure_cvo_single_node_deployment.tfvars"
----


배포를 삭제하려면

[source, cli]
----
  terraform destroy
----
.요리법:
`Single Node Instance`

단일 노드 Cloud Volumes ONTAP (CVO)에 대한 Terraform 변수입니다.

[cols="20%, 10%, 70%"]
|===
| *이름* | *유형* | *설명* 


| *새로고침_토큰* | 끈 | (필수) NetApp 클라우드 관리자의 새로 고침 토큰입니다.  이는 netapp Cloud Central에서 생성될 수 있습니다. 


| *az_connector_name* | 끈 | (필수) Cloud Manager Connector의 이름입니다. 


| *az_connector_location* | 끈 | (필수) Cloud Manager Connector가 생성될 위치입니다. 


| *az_connector_subscription_id* | 끈 | (필수) Azure 구독의 ID입니다. 


| *az_connector_company* | 끈 | (필수) 사용자의 회사 이름입니다. 


| *az_connector_resource_group* | 정수 | (필수) 리소스가 생성될 Azure의 리소스 그룹입니다. 


| *az_connector_subnet_id* | 끈 | (필수) 가상 머신의 서브넷 이름입니다. 


| *az_connector_vnet_id* | 끈 | (필수) 가상 네트워크의 이름입니다. 


| *az_connector_network_security_group_name* | 끈 | (필수) 인스턴스의 보안 그룹 이름입니다. 


| *az_connector_associate_public_ip_address* | 끈 | (필수) 공용 IP 주소를 가상 머신에 연결할지 여부를 나타냅니다. 


| *az_connector_계정_아이디* | 끈 | (필수) 커넥터가 연결될 NetApp 계정 ID입니다.  제공되지 않으면 Cloud Manager는 첫 번째 계정을 사용합니다.  계정이 없으면 Cloud Manager가 새 계정을 만듭니다.  Cloud Manager의 계정 탭에서 계정 ID를 찾을 수 있습니다. https://cloudmanager.netapp.com[] . 


| *az_connector_admin_비밀번호* | 끈 | (필수) 커넥터의 비밀번호입니다. 


| *az_connector_admin_사용자 이름* | 끈 | (필수) 커넥터의 사용자 이름입니다. 


| *az_cvo_name* | 끈 | (필수) Cloud Volumes ONTAP 작업 환경의 이름입니다. 


| *az_cvo_위치* | 끈 | (필수) 작업 환경이 생성될 위치입니다. 


| *az_cvo_서브넷_아이디* | 끈 | (필수) Cloud Volumes ONTAP 시스템의 서브넷 이름입니다. 


| *az_cvo_vnet_id* | 끈 | (필수) 가상 네트워크의 이름입니다. 


| *az_cvo_vnet_리소스_그룹* | 끈 | (필수) 가상 네트워크와 연결된 Azure의 리소스 그룹입니다. 


| *az_cvo_데이터_암호화_유형* | 끈 | (필수) 작업 환경에 사용할 암호화 유형: `AZURE` , `NONE` ].  기본값은 `AZURE` . 


| *az_cvo_스토리지_유형* | 끈 | (필수) 첫 번째 데이터 집계에 대한 저장 유형: `Premium_LRS` , `Standard_LRS` , `StandardSSD_LRS` ].  기본값은 `Premium_LRS` 


| *az_cvo_svm_비밀번호* | 끈 | (필수) Cloud Volumes ONTAP 의 관리자 비밀번호입니다. 


| *az_cvo_작업공간_아이디* | 끈 | (필수) Cloud Volumes ONTAP 배포하려는 Cloud Manager 작업 공간의 ID입니다.  제공되지 않으면 Cloud Manager는 첫 번째 작업 공간을 사용합니다.  ID는 Workspace 탭에서 찾을 수 있습니다. https://cloudmanager.netapp.com[] . 


| *az_cvo_용량_티어* | 끈 | (필수) 첫 번째 데이터 집계에 대해 데이터 계층화를 활성화할지 여부:[`Blob` , `NONE` ].  기본값은 `BLOB` . 


| *az_cvo_쓰기_속도_상태* | 끈 | (필수) Cloud Volumes ONTAP 에 대한 쓰기 속도 설정: `NORMAL` , `HIGH` ].  기본값은 `NORMAL` .  이 주장은 HA 쌍에는 해당되지 않습니다. 


| *az_cvo_ontap_버전* | 끈 | (필수) 필요한 ONTAP 버전입니다.  'use_latest_version'이 true로 설정된 경우 무시됩니다.  기본적으로 최신 버전을 사용합니다. 


| *az_cvo_인스턴스_유형* | 끈 | (필수) 선택한 라이선스 유형에 따라 달라지는 사용할 인스턴스 유형: 탐색:[`Standard_DS3_v2` ], 기준:[`Standard_DS4_v2,Standard_DS13_v2,Standard_L8s_v2` ], 프리미엄:[`Standard_DS5_v2`,`Standard_DS14_v2` ], BYOL: PayGo에 대해 정의된 모든 인스턴스 유형.  지원되는 인스턴스 유형에 대한 자세한 내용은 Cloud Volumes ONTAP 릴리스 노트를 참조하세요.  기본값은 `Standard_DS4_v2` . 


| *az_cvo_라이센스_유형* | 끈 | (필수) 사용할 라이센스 유형입니다.  단일 노드의 경우:[`azure-cot-explore-paygo` , `azure-cot-standard-paygo` , `azure-cot-premium-paygo` , `azure-cot-premium-byol` , `capacity-paygo` ].  HA의 경우:[`azure-ha-cot-standard-paygo` , `azure-ha-cot-premium-paygo` , `azure-ha-cot-premium-byol` , `ha-capacity-paygo` ].  기본값은 `azure-cot-standard-paygo` .  사용 `capacity-paygo` 또는 `ha-capacity-paygo` HA의 경우 Bring Your Own License 유형을 용량 기반 또는 프리미엄으로 선택합니다.  사용 `azure-cot-premium-byol` 또는 `azure-ha-cot-premium-byol` HA의 경우 Bring Your Own License 유형을 노드 기반으로 선택합니다. 


| *az_cvo_nss_계정* | 끈 | (필수) 이 Cloud Volumes ONTAP 시스템과 함께 사용할 NetApp 지원 사이트 계정 ID입니다.  라이선스 유형이 BYOL이고 NSS 계정이 제공되지 않으면 Cloud Manager는 기존의 첫 번째 NSS 계정을 사용하려고 합니다. 


| *az_테넌트_아이디* | 끈 | (필수) Azure에 등록된 애플리케이션/서비스 주체의 테넌트 ID입니다. 


| *az_application_id* | 끈 | (필수) Azure에 등록된 애플리케이션/서비스 주체의 애플리케이션 ID입니다. 


| *az_application_key* | 끈 | (필수) Azure에 등록된 애플리케이션/서비스 주체의 애플리케이션 키입니다. 
|===
--
.CVO HA 배포
--
.Azure에 CVO HA를 배포하기 위한 Terraform 구성 파일
이 섹션에는 Azure에서 CVO(Cloud Volumes ONTAP) HA(고가용성)를 배포/구성하기 위한 다양한 Terraform 구성 파일이 포함되어 있습니다.

Terraform 문서: https://registry.terraform.io/providers/NetApp/netapp-cloudmanager/latest/docs[]

.절차
템플릿을 실행하려면:

. 저장소를 복제합니다.
+
[source, cli]
----
    git clone https://github.com/NetApp/na_cloud_volumes_automation.git
----
. 원하는 폴더로 이동하세요
+
[source, cli]
----
    cd na_cloud_volumes_automation
----
. Azure CLI에 로그인합니다(Azure CLI가 설치되어 있어야 합니다).
+
[source, cli]
----
    az login
----
. 변수를 업데이트하세요 `vars\azure_cvo_ha_deployment.tfvars` .
. Terraform 저장소를 초기화하여 모든 필수 구성 요소를 설치하고 배포를 준비합니다.
+
[source, cli]
----
    terraform init
----
. terraform validate 명령을 사용하여 Terraform 파일을 확인합니다.
+
[source, cli]
----
    terraform validate
----
. 배포에 필요한 모든 변경 사항을 미리 보려면 구성을 시험적으로 실행해 보세요.
+
[source, cli]
----
    terraform plan -target="module.az_cvo_ha_deployment" -var-file="vars\azure_cvo_ha_deployment.tfvars"
----
. 배포 실행
+
[source, cli]
----
    terraform apply -target="module.az_cvo_ha_deployment" -var-file="vars\azure_cvo_ha_deployment.tfvars"
----


배포를 삭제하려면

[source, cli]
----
  terraform destroy
----
.요리법:
`HA Pair Instance`

HA 쌍 Cloud Volumes ONTAP (CVO)에 대한 Terraform 변수입니다.

[cols="20%, 10%, 70%"]
|===
| *이름* | *유형* | *설명* 


| *새로고침_토큰* | 끈 | (필수) NetApp 클라우드 관리자의 새로 고침 토큰입니다.  이는 netapp Cloud Central에서 생성될 수 있습니다. 


| *az_connector_name* | 끈 | (필수) Cloud Manager Connector의 이름입니다. 


| *az_connector_location* | 끈 | (필수) Cloud Manager Connector가 생성될 위치입니다. 


| *az_connector_subscription_id* | 끈 | (필수) Azure 구독의 ID입니다. 


| *az_connector_company* | 끈 | (필수) 사용자의 회사 이름입니다. 


| *az_connector_resource_group* | 정수 | (필수) 리소스가 생성될 Azure의 리소스 그룹입니다. 


| *az_connector_subnet_id* | 끈 | (필수) 가상 머신의 서브넷 이름입니다. 


| *az_connector_vnet_id* | 끈 | (필수) 가상 네트워크의 이름입니다. 


| *az_connector_network_security_group_name* | 끈 | (필수) 인스턴스의 보안 그룹 이름입니다. 


| *az_connector_associate_public_ip_address* | 끈 | (필수) 공용 IP 주소를 가상 머신에 연결할지 여부를 나타냅니다. 


| *az_connector_계정_아이디* | 끈 | (필수) 커넥터가 연결될 NetApp 계정 ID입니다.  제공되지 않으면 Cloud Manager는 첫 번째 계정을 사용합니다.  계정이 없으면 Cloud Manager가 새 계정을 만듭니다.  Cloud Manager의 계정 탭에서 계정 ID를 찾을 수 있습니다. https://cloudmanager.netapp.com[] . 


| *az_connector_admin_비밀번호* | 끈 | (필수) 커넥터의 비밀번호입니다. 


| *az_connector_admin_사용자 이름* | 끈 | (필수) 커넥터의 사용자 이름입니다. 


| *az_cvo_name* | 끈 | (필수) Cloud Volumes ONTAP 작업 환경의 이름입니다. 


| *az_cvo_위치* | 끈 | (필수) 작업 환경이 생성될 위치입니다. 


| *az_cvo_서브넷_아이디* | 끈 | (필수) Cloud Volumes ONTAP 시스템의 서브넷 이름입니다. 


| *az_cvo_vnet_id* | 끈 | (필수) 가상 네트워크의 이름입니다. 


| *az_cvo_vnet_리소스_그룹* | 끈 | (필수) 가상 네트워크와 연결된 Azure의 리소스 그룹입니다. 


| *az_cvo_데이터_암호화_유형* | 끈 | (필수) 작업 환경에 사용할 암호화 유형: `AZURE` , `NONE` ].  기본값은 `AZURE` . 


| *az_cvo_스토리지_유형* | 끈 | (필수) 첫 번째 데이터 집계에 대한 저장 유형: `Premium_LRS` , `Standard_LRS` , `StandardSSD_LRS` ].  기본값은 `Premium_LRS` 


| *az_cvo_svm_비밀번호* | 끈 | (필수) Cloud Volumes ONTAP 의 관리자 비밀번호입니다. 


| *az_cvo_작업공간_아이디* | 끈 | (필수) Cloud Volumes ONTAP 배포하려는 Cloud Manager 작업 공간의 ID입니다.  제공되지 않으면 Cloud Manager는 첫 번째 작업 공간을 사용합니다.  ID는 Workspace 탭에서 찾을 수 있습니다. https://cloudmanager.netapp.com[] . 


| *az_cvo_용량_티어* | 끈 | (필수) 첫 번째 데이터 집계에 대해 데이터 계층화를 활성화할지 여부:[`Blob` , `NONE` ].  기본값은 `BLOB` . 


| *az_cvo_쓰기_속도_상태* | 끈 | (필수) Cloud Volumes ONTAP 에 대한 쓰기 속도 설정: `NORMAL` , `HIGH` ].  기본값은 `NORMAL` .  이 주장은 HA 쌍에는 해당되지 않습니다. 


| *az_cvo_ontap_버전* | 끈 | (필수) 필요한 ONTAP 버전입니다.  'use_latest_version'이 true로 설정된 경우 무시됩니다.  기본적으로 최신 버전을 사용합니다. 


| *az_cvo_인스턴스_유형* | 끈 | (필수) 선택한 라이선스 유형에 따라 달라지는 사용할 인스턴스 유형: 탐색:[`Standard_DS3_v2` ], 기준:[`Standard_DS4_v2, Standard_DS13_v2, Standard_L8s_v2` ], 프리미엄:[`Standard_DS5_v2` , `Standard_DS14_v2` ], BYOL: PayGo에 대해 정의된 모든 인스턴스 유형.  지원되는 인스턴스 유형에 대한 자세한 내용은 Cloud Volumes ONTAP 릴리스 노트를 참조하세요.  기본값은 `Standard_DS4_v2` . 


| *az_cvo_라이센스_유형* | 끈 | (필수) 사용할 라이센스 유형입니다.  단일 노드의 경우:[`azure-cot-explore-paygo, azure-cot-standard-paygo, azure-cot-premium-paygo, azure-cot-premium-byol, capacity-paygo` ].  HA의 경우:[`azure-ha-cot-standard-paygo, azure-ha-cot-premium-paygo, azure-ha-cot-premium-byol, ha-capacity-paygo` ].  기본값은 `azure-cot-standard-paygo` .  사용 `capacity-paygo` 또는 `ha-capacity-paygo` HA의 경우 Bring Your Own License 유형을 용량 기반 또는 프리미엄으로 선택합니다.  사용 `azure-cot-premium-byol` 또는 `azure-ha-cot-premium-byol` HA의 경우 Bring Your Own License 유형을 노드 기반으로 선택합니다. 


| *az_cvo_nss_계정* | 끈 | (필수) 이 Cloud Volumes ONTAP 시스템과 함께 사용할 NetApp 지원 사이트 계정 ID입니다.  라이선스 유형이 BYOL이고 NSS 계정이 제공되지 않으면 Cloud Manager는 기존의 첫 번째 NSS 계정을 사용하려고 합니다. 


| *az_테넌트_아이디* | 끈 | (필수) Azure에 등록된 애플리케이션/서비스 주체의 테넌트 ID입니다. 


| *az_application_id* | 끈 | (필수) Azure에 등록된 애플리케이션/서비스 주체의 애플리케이션 ID입니다. 


| *az_application_key* | 끈 | (필수) Azure에 등록된 애플리케이션/서비스 주체의 애플리케이션 키입니다. 
|===
--
====